<!DOCTYPE html>
<html>
<body>
<script>
async function getUSDTBalance() {
  const apiKey = "YOUR_API_KEY";
  const apiSecret = "YOUR_API_SECRET";
  const passphrase = "YOUR_API_PASSPHRASE";

  const endpoint = "/api/v1/accounts";
  const baseUrl = "https://api.kucoin.com";
  const method = "GET";
  const timestamp = Date.now().toString();

  // Sign the request
  const encoder = new TextEncoder();
  const keyData = encoder.encode(apiSecret);
  const strForSign = timestamp + method + endpoint;
  const signatureBytes = await crypto.subtle.sign(
    { name: "HMAC", hash: "SHA-256" },
    await crypto.subtle.importKey("raw", keyData, { name: "HMAC", hash: "SHA-256" }, false, ["sign"]),
    encoder.encode(strForSign)
  );
  const signature = btoa(String.fromCharCode(...new Uint8Array(signatureBytes)));

  // Sign the passphrase
  const passphraseBytes = await crypto.subtle.sign(
    { name: "HMAC", hash: "SHA-256" },
    await crypto.subtle.importKey("raw", keyData, { name: "HMAC", hash: "SHA-256" }, false, ["sign"]),
    encoder.encode(passphrase)
  );
  const passphraseSig = btoa(String.fromCharCode(...new Uint8Array(passphraseBytes)));

  const res = await fetch(baseUrl + endpoint, {
    method,
    headers: {
      "KC-API-KEY": apiKey,
      "KC-API-SIGN": signature,
      "KC-API-TIMESTAMP": timestamp,
      "KC-API-PASSPHRASE": passphraseSig,
      "KC-API-KEY-VERSION": "2"
    }
  });

  const data = await res.json();
  const usdt = data.data.find(acc => acc.currency === "USDT");
  console.log("USDT Balance:", usdt ? usdt.balance : "Not found");
}

getUSDTBalance();
</script>
</body>
</html>
